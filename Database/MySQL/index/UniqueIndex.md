# 유니크 인덱스

* 유니크는 인덱스라기보다는 제약 조건에 가깝습니다.
* 유니크는 테이블이나 인덱스에 같은 값이 2개 이상 저장될 수 없음을 의미하는데, MySQL에서는 인덱스 없이 유니크 제약만 설정할 방법이 없습니다.
* 유니크 인덱스에서 NULL도 저장될 수 있는데, NULL은 특정 값이 아니기에 2개 이상 저장될 수 있습니다.
* MySQL에서 프라이머리 키는 기본적으로 NULL을 허용하지 않는 유니크 속성이 자동으로 부여됩니다.
* MyISAM이나 MEMORY 테이블의 프라이머리 키는 사실 NULL이 허용되지 않는 유니크 인덱스와 같지만 InnoDB 테이블의 프라이머리 키는 클러스터링 키의 역할도 하므로 유니크 인덱스와는 근본적으로 다릅니다.

## 유니크 인덱스 읽기

* 하나의 값을 검색하는 경우, 유니크 인덱스와 일반 세컨더리 인덱스는 사용되는 실행 계획이 다릅니다. 하지만 이는 인덱스의 성격이 유니크한지 아닌지에 따른 차이일 뿐 큰 차이는 없습니다.
* 세컨더리 인덱스와 유니크 인덱스가 읽어야할 레코드 건수가 같다면 성능상의 차이는 미미합니다.

## 유니크 인덱스 쓰기

* 유니크 인덱스에서 INSERT 요청이 들어오면 유니크 인덱스의 키 값이 중복되는지 체크한 다음 인덱스 쓰기 작업이 진행됩니다.
* 세컨더리 인덱스보다 하나의 과정이 추가되기에 성능이 느립니다.
* MySQL에서 유니크 인덱스에서 중복된 값을 체크할 때는 읽기 잠금을 사용하고, 쓰기를 할 때는 쓰기 잠금을 사용하는데 이 과정에서 데드락이 빈번하게 발생합니다.
* 유니크 인덱스는 중복 체크를 반드시 해야하기에 InnoDB의 체인지 버퍼를 사용하지 못하기에 세컨더리 인덱스보다 변경 작업이 느립니다. 


> 참조
>
> Real MySQL 8.0 1권(https://product.kyobobook.co.kr/detail/S000001766482)