# 잡과 스텝

## 잡

* 잡은 처음부터 끝까지 독립적으로 실행할 수 있는 고유하며 순서가 지정된 여러 스텝의 목록으로 정의할 수 있습니다.
* 잡을 세분화해서 설명하면 다음과 같습니다.
  * 유일하다 : 구성한 내용을 재사용할 수 있으며, 동일하게 구성으로 필요한 만큼 잡을 실행할 수 있습니다.
  * 순서를 가진 여러 스텝의 목록이다 : 모든 스텝을 논리적인 순서대로 실행할 수 있도록 잡을 구성할 수 있습니다.
  * 처음부터 끝까지 실행 가능하다 : 잡은 외부 의존성 없이 실행할 수 있는 일련의 스텝입니다.
  * 독립적이다 : 각 배치 잡은 외부 의존성의 영향을 받지 않고 실행할 수 있어야 합니다.

### 잡의 생명주기

* 잡의 실행은 생명주기대로 진행됩니다. 생명주기와 관련된 지식은 개발자가 잡을 구조화하고 실행 시에 발생하는 상황을 이해하는 데 중요합니다.
* 잡을 정의할 때 실제로 하는 일은 잡과 관련된 청사진을 제공하는 것입니다. 이 청사진은 잡의 인스턴스를 생성하는 데 사용됩니다.
* 잡의 실행하는 잡 러너(Job Runner)에서 시작됩니다. 잡 러너는 잡 이름과 여러 파라미터를 받아들여 잡을 실행시키는 역할을 합니다.
* 잡 러너의 종류는 다음과 같습니다.
  * CommandLineJobRunner : 스크립트를 이용하거나 명령행에서 직접 잡을 실행할 때 사용합니다. 
CommandLineJobRunner는 스프링을 부트스트랩하고, 전달받은 파라미터를 사용해 요청된 잡을 실행합니다.
  * JobRegistryBackgroundJobRunner : 쿼츠(Quartz)와 같은 스케줄러를 사용해 잡을 실행하면, 실행 가능한 잡을 가지는 JobRegistry를 생성하며, 
이를 JobRegistryBackgroundJobRunner가 생성합니다.
* 잡 러너는 프레임워크가 제공하는 표준 모듈이 아닙니다. 따라서 사용자가 직접 구현해야 합니다. 또한 실제 진입점은 잡 러너가 아닌 JobLauncher 인터페이스입니다.
* 배치 잡이 실행되면 JobInstance가 생성됩니다.
* JobInstance는 잡의 논리적 실행을 나타내며 잡 이름, 식별 파라미터로 식별됩니다.
* JobInstance는 단 한번만 실행되며, 이를 BATCH_JOB_INSTANCE, BATCH_JOB_EXECUTION_PARAMS 테이블을 통해 식별합니다.