# 4장 설계 품질과 트레이드오프

* 객체지향 설계의 핵심은 역할, 책임, 협력입니다.
* 협력은 애플리케이션의 기능을 구현하기 위해 메시지를 주고받는 객체들 사이의 상호작용입니다.
* 책임은 객체가 다른 객체와 협력하기 위해 수행하는 행동이고, 역할을 대체 가능한 책임의 집합입니다.
* 책임이 객체지향 애플리케이션 전체의 품질을 결정합니다.
* 객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동입니다.
* 객체의 상태가 아닌 객체의 행동에 초점을 맞춘다면 결합도와 응집도를 합리적인 수준으로 유지할 수 있습니다.

## 데이터 중심

* 데이터 중심의 관점에서 객체는 자신이 포함하는 데이터를 조작하는 데 필요한 오퍼레이션을 정의합니다.
* 책임 중심의 관점에서 객체는 다른 객체가 요청할 수 있는 오퍼레이션을 위해 필요한 상태를 보관합니다.
* 객체의 상태는 구현에 속합니다. 구현은 불안정하기에 변하기 쉽습니다.
* 상태를 객체 분할의 중심으로 삼으면 구현에 관한 세부사항이 객체의 인터페이스에 스며들어 캡슐화 원칙이 무너집니다.
* 객체의 책임은 인터페이스에 속합니다. 책임에 초점을 맞춘다면 변경에 안정적인 설계를 할 수 있습니다.

## 캡슐화

* 상태와 행동을 하나의 객체 안에 모으는 이유는 객체의 내부 구현을 외부로부터 감추기 위해서입니다.
* 변경될 가능성이 높은 부분을 **구현**, 상대적으로 안정적인 부분을 **인터페이스**라고 부릅니다.
* 객체지향에서 가장 중요한 원리는 캡슐화입니다.
* 캡슐화를 통해 변경의 관점에서의 설계 품질을 판단할 수 있습니다.

## 응집도와 결합도

* 응집도는 모듈에 포함된 내부 요소들이 연관돼 있는 정도를 나타냅니다.
  * 모듈 내의 요소들이 하나의 목적을 위해 긴밀하게 협력한다면 그 모듈은 높은 응집도를 가집니다.
  * 객체지향의 관점에서 응집도는 객체 또는 클래스에 얼마나 관련 높은 책임들을 할당했는지를 나타냅니다.
* 결합도는 의존성의 정도를 나타내며 다른 모듈에 대해 얼마나 많은 지식을 갖고 있는지를 나타내는 척도입니다.
  * 객체지향 관점에서 결합도는 객체 또는 클래스가 협력에 필요한 적절한 수준의 관계만을 유지하고 있는지를 나타냅니다.
* 일반적으로 좋은 설계란 높은 응집도와 낮은 결합도를 가진 모듈로 구성된 설계를 의미합니다.
* 응집도와 결합도는 변경과 관련된 것입니다.
* 변경의 관점에서 응집도와 결합도를 판단할 수 있습니다.
  * 응집도란 변경이 발생할 때 모듈 내부에서 발생하는 변경의 정도
  * 결합도란 한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도
* 응집도의 정도는 다음과 같이 정리할 수 있습니다.
  * 하나의 원인에 의해 변경해야 하는 부분이 다수의 모듈에 분산돼 있다면 낮은 응집도를 가진다고 말합니다.
  * 하나의 변경에 의해 변경해야 하는 대상과 범위가 명확하다면 높은 응집도를 가진다고 말합니다.
* 결합도의 정도는 다음과 같이 정리할 수 있습니다.
  * 함께 변경해야하는 모듈이 많다면 결합도가 높다고 말합니다.
  * 변경의 대상이 명확하다면 결합도가 낮다고 말합니다.

## 캡슐화를 지켜라

* 객체는 자신이 어떤 데이터를 가지고 있는지를 내부에 캡슐화하고 외부에 공개해서는 안됩니다.
* 객체는 스스로 상태를 책임져야 하며 외부에서는 인터페이스에 정의된 메소드를 통해서만 상태에 접근할 수 있어야 합니다.(getter, setter 사용하지 맙시다.)

## 스스로 자신의 데이터를 책임지는 객체

* 객체 내부에 저장되는 데이터보다 객체가 협력에 참여하면서 수행할 책임을 정의하는 오퍼레이션이 더 중요합니다.
* 객체를 설계할 때 어떤 데이터를 저장할지에 대한 결정을 다음 2가지 관점에서 분리해야 합니다.
  * 이 객체가 어떤 데이터를 포함해야 하는가?
  * 이 객체가 데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가?

## 응집도, 결합도

* 응집도 높음, 결합도 높음 : 안정된 라이브러리
* 응집도 낮음, 결합도 높음 : jpa repository의 optional 에러 처리(예외 메시지를 변경해야할 경우)
* 응집도 높음, 결합도 낮음 : 좋은 객체지향 설계
* 응집도 낮음, 결합도 낮음 : 안좋은것일까?