# 3장 역할, 책임, 협력

* 객체지향 패러다임의 관점에서 핵심은 역할(role), 책임(responsibility), 협력(collaboration)입니다.
* 객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것입니다.
* 객체지향의 핵심은 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정에서 드러난다.
* 너무 이른 시기에 구현에 초점을 맞추는 것은 변경하기 어렵고 유연하지 못한 코드를 낳는 원인이 됩니다.

## 협력

* 객체지향 원칙을 따르는 애플리케이션의 제어 흐름은 어떤 하나의 객체에 의해 통제되지 않고 다양한 객체들 사이에 균형 있게 분배되는 것이 일반적입니다.
* 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 **협력**이라고 합니다.
  * 두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작됩니다.
  * **메시지 전송**은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단입니다.
* 객체가 협력에 참여하기 위해 수행하는 로직은 **책임**이라고 합니다.
  * 메시지 전송 과정에서 메시지를 수신한 객체는 메서드를 실행해 요청에 응답합니다.
* 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **역할**을 구성합니다.
* 자신이 할 수 없는 일을 다른 객체에게 위임하면 협력에 참여하는 객체들의 전체적인 자율성을 향상시킬 수 있습니다.

## 협력과 설계

* 객체지향은 객체를 중심에 놓는 프로그래밍 패러다임입니다. 이때 객체란 상태와 행동을 함께 캡슐화하는 실행 단위이입니다.
* 애플리케이션 안에 어떤 객체가 필요하다면 그 이유는 단 하나여야 합니다. 그 객체가 어떤 협력에 참여하고 있기 때문입니다. 그리고 객체가 협력에 참여할 수 있는 이유는 협력에 필요한 적절한 행동을 보유하고 있기 때문입니다.
* 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력입니다. 또한 객체의 상태를 결정하는 것은 행동입니다.
* 상태는 객체가 행동하는 데 필요한 정보에 의해 결정되고 행동은 협력 안에서 객체가 처리할 메시지로 결정됩니다.
* 협력은 객체를 설계하는 데 필요한 일종의 **문맥**을 제공합니다.

## 책임

* 협력에 참여하기 위해 객체가 수행하는 행동을 **책임**이라고 부릅니다.
* 책임은 객체지향 설계의 핵심입니다.
* 책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장입니다.
* 객체의 책임은 객체가 '무엇을 알고 있는가'와 '무엇을 할 수 있는가'로 구성됩니다.
  * 아는 것
    * 사적인 정보에 관해 아는 것
    * 관련된 객체에 관해 아는 것
    * 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것
  * 하는 것
    * 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
    * 다른 객체의 행동을 시작시키는 것
    * 다른 객체의 활동을 제어하고 조절하는 것
* 책임은 객체가 수행할 수 있는 행동을 종합적이고 간략하게 서술하기 때문에 메시지보다 추상적이고 개념적으로도 더 큽니다.
* 적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에게 할당해야만 단순하고 유연한 설계를 창조할 수 있습니다.

## 책임 할당

* 자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것입니다. 이를 책임 할당을 위한 INFORMATION EXPERT 패턴이라고 합니다.
* 객체에게 책임을 할당하기 위해서는 먼저 협력이라는 문맥을 정의해야 합니다.
* 협력을 설계하는 출발점은 시스템이 사용자에게 제공하는 기능을 시스템이 담당할 하나의 책임으로 바라보는 것입니다.
* 객체지향 설계는 시스템의 책임을 완료하는 데 필요한 더 작은 책임을 찾아내고 이를 객체들에게 할당하는 반복적인 과정을 통해 모양을 갖춰나갑니다.
* 메시지를 통해 협력이 시작됩니다. 이 과정에서 메시지를 처리할 적절한 객체를 선택해야 합니다. 그 후 객체가 수행할 적절한 책임을 선택해야 합니다.
* 메시지를 통해 객체의 퍼블릭 인터페이스가 구성됩니다. 또한 책임은 해당 객체의 구현을 결정합니다.

## 책임 주도 설계

* 책임 주도 설계는 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법입니다.

## 메시지가 객체를 결정한다.

* 메시지가 객체를 선택하게 해야 하는 두 가지 중요한 이유가 있습니다.
  1. 객체가 최소한의 인터페이스를 가질 수 있게 됩니다.
  2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 됩니다.

## 행동이 상태를 결정한다.

* 객체가 존재하는 이유는 협력에 참여하기 위해서입니다. 객체를 객체답게 만드는 것은 객체의 상태가 아닌 객체가 다른 객체에게 제공하는 행동입니다.
* 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법입니다.
* 객체가 협력에 적합한지를 결정하는 것은 그 객체의 상태가 아닌 행동입니다.
* 행동이 아닌 상태에 초점에 맞춘다면 객체 내부 구현이 객체의 퍼블릭 인터페이스에 노출되도록 만들기에 캡슐화를 저해합니다. 이와 같이 객체의 내부 구현에 초점을 맞춘 설계 방법을 데이터-주도 설계라고 부릅니다.
* 협력에 초점을 맞춰야지만 응집도가 높고 결합도가 낮은 객체들을 창조할 수 있습니다. 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료일뿐입니다.

## 역할과 협력

* 객체는 협력이라는 주어진 문맥 안에서 특정한 목적을 갖게 됩니다. 객체의 목적은 협력 안에서 객체가 맡게 되는 책임의 집합으로 표시됩니다.
* 즉, 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 **역할**이라고 부릅니다.(인터페이스)

## 유연하고 재사용 가능한 협력

* 역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문입니다.
* 책임과 역할을 중심으로 협력을 바라보는 것이 변경과 확장이 용이한 유연한 설계로 나아가는 첫걸음입니다.

## 객체 대 역할

* 협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주합니다.
* 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 됩니다.
* 역할의 가장 큰 장점은 설계의 구성 요소를 추상화할 수 있다는 것입니다.

## 역할과 추상화

* 추상화가 가지는 두 가지 장점인 상위 수준에서의 단순화와 설계의 유연성은 협력의 관점에서 역할에도 동일하게 적용될 수 있습니다.