# 9ì¥

ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬Â·ìš´ì˜ â€” ConfigMap, Secret, ë¡¤ë§ ì—…ë°ì´íŠ¸, Kustomize, Helm, Metrics Server, HPA, Dashboard

```
                    ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ & ìš´ì˜
                           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼          â–¼           â–¼           â–¼              â–¼
 ConfigMap   Secret     Rolling     íŒ¨í‚¤ì§•/ë°°í¬     ëª¨ë‹ˆí„°ë§/ìŠ¤ì¼€ì¼ë§
 (ì„¤ì • ì£¼ì…) (ì•”í˜¸í™”    Update     (Kustomize,    (Metrics Server,
             ì„¤ì • ì£¼ì…)  (set,       Helm)         HPA, Dashboard)
                       rollout)
```

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì»¨í”¼ê·¸ë§µ(ConfigMap)ì„ ì´ìš©í•´ ì¶”ê°€ ì„¤ì • ë„£ê¸°

**ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ì„¤ì •ì„ ë¶„ë¦¬**í•˜ì—¬ í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ì„¤ì •ì„ ì£¼ì…í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜

```
ê¸°ì¡´ ë¬¸ì œ:
  ì„¤ì •ì´ ì´ë¯¸ì§€ì— í¬í•¨ â†’ í™˜ê²½(dev/staging/prod)ë§ˆë‹¤ ì´ë¯¸ì§€ë¥¼ ë”°ë¡œ ë¹Œë“œí•´ì•¼ í•¨

ConfigMap í•´ê²°:
  ì´ë¯¸ì§€ëŠ” í•˜ë‚˜ + ConfigMapìœ¼ë¡œ í™˜ê²½ë³„ ì„¤ì •ë§Œ êµì²´

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ë™ì¼í•œ   â”‚ â†â”€â”€ â”‚ ConfigMap    â”‚
  â”‚  ì´ë¯¸ì§€   â”‚     â”‚ (dev ì„¤ì •)   â”‚  â†’ dev í™˜ê²½
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ ConfigMap    â”‚
                   â”‚ (prod ì„¤ì •)  â”‚  â†’ prod í™˜ê²½
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ConfigMap ìƒì„±

**ëª…ë ¹í˜•(Imperative) ë°©ì‹**
```bash
# ë¦¬í„°ëŸ´ ê°’ìœ¼ë¡œ ìƒì„±
kubectl create configmap my-config \
  --from-literal=DB_HOST=mysql-service \
  --from-literal=DB_PORT=3306 \
  --from-literal=LOG_LEVEL=info

# íŒŒì¼ë¡œ ìƒì„±
kubectl create configmap app-config --from-file=app.properties

# íŠ¹ì • í‚¤ ì´ë¦„ìœ¼ë¡œ íŒŒì¼ ë§¤í•‘
kubectl create configmap app-config --from-file=config.properties=./my-app.properties

# ë””ë ‰í† ë¦¬ ë‚´ ëª¨ë“  íŒŒì¼ë¡œ ìƒì„± (íŒŒì¼ëª…ì´ í‚¤, ë‚´ìš©ì´ ê°’)
kubectl create configmap app-config --from-file=./config-dir/

# env íŒŒì¼ë¡œ ìƒì„± (KEY=VALUE í˜•ì‹)
kubectl create configmap app-config --from-env-file=app.env
```

**ì„ ì–¸í˜•(Declarative) ë°©ì‹**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-config
  namespace: default
data:                        # ì¼ë°˜ í…ìŠ¤íŠ¸ ë°ì´í„°
  DB_HOST: mysql-service
  DB_PORT: "3306"            # ìˆ«ìë„ ë¬¸ìì—´ë¡œ ì €ì¥
  LOG_LEVEL: info
  app.properties: |          # íŒŒì¼ ë‚´ìš©ë„ ì €ì¥ ê°€ëŠ¥ (ë©€í‹°ë¼ì¸)
    server.port=8080
    spring.datasource.url=jdbc:mysql://mysql:3306/mydb
    spring.profiles.active=production
binaryData:                  # ë°”ì´ë„ˆë¦¬ ë°ì´í„° (Base64 ì¸ì½”ë”©)
  logo.png: <base64-encoded>
```

```bash
# ConfigMap í™•ì¸
kubectl get configmap
kubectl describe configmap my-config
kubectl get configmap my-config -o yaml
```

### ConfigMap ì‚¬ìš© ë°©ì‹

```
ConfigMap ì‚¬ìš© ë°©ì‹ 3ê°€ì§€:

1. í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…
   ConfigMap â”€â”€(env)â”€â”€â†’ ì»¨í…Œì´ë„ˆ í™˜ê²½ ë³€ìˆ˜

2. ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¡œ íŒŒì¼ ì£¼ì…
   ConfigMap â”€â”€(volume)â”€â”€â†’ ì»¨í…Œì´ë„ˆ ë‚´ íŒŒì¼

3. ì»¤ë§¨ë“œ ì¸ìë¡œ ì£¼ì…
   ConfigMap â”€â”€(args)â”€â”€â†’ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì¸ì
```

**1. í™˜ê²½ ë³€ìˆ˜ â€” ê°œë³„ í‚¤ ì£¼ì… (valueFrom)**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: config-env-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      env:
        - name: DATABASE_HOST          # ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•  í™˜ê²½ ë³€ìˆ˜ëª…
          valueFrom:
            configMapKeyRef:
              name: my-config          # ConfigMap ì´ë¦„
              key: DB_HOST             # ConfigMap ë‚´ í‚¤
        - name: DATABASE_PORT
          valueFrom:
            configMapKeyRef:
              name: my-config
              key: DB_PORT
```

**2. í™˜ê²½ ë³€ìˆ˜ â€” ì „ì²´ í‚¤ ì¼ê´„ ì£¼ì… (envFrom)**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: config-envfrom-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      envFrom:
        - configMapRef:
            name: my-config            # ConfigMapì˜ ëª¨ë“  í‚¤ê°€ í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…
          prefix: APP_                  # ì„ íƒ: ì ‘ë‘ì‚¬ ì¶”ê°€ â†’ APP_DB_HOST, APP_DB_PORT
```

**3. ë³¼ë¥¨ ë§ˆìš´íŠ¸ â€” íŒŒì¼ë¡œ ì£¼ì…**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: config-volume-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      volumeMounts:
        - name: config-vol
          mountPath: /etc/config       # ì´ ë””ë ‰í† ë¦¬ì— ConfigMap í‚¤ê°€ íŒŒì¼ë¡œ ìƒì„±
          readOnly: true
  volumes:
    - name: config-vol
      configMap:
        name: my-config
        items:                         # ì„ íƒ: íŠ¹ì • í‚¤ë§Œ ë§ˆìš´íŠ¸
          - key: app.properties
            path: application.properties  # íŒŒì¼ëª… ë³€ê²½ ê°€ëŠ¥
```

```
ë³¼ë¥¨ ë§ˆìš´íŠ¸ ê²°ê³¼:
/etc/config/
 â”œâ”€ DB_HOST          â†’ ë‚´ìš©: "mysql-service"
 â”œâ”€ DB_PORT          â†’ ë‚´ìš©: "3306"
 â”œâ”€ LOG_LEVEL        â†’ ë‚´ìš©: "info"
 â””â”€ app.properties   â†’ ë‚´ìš©: "server.port=8080\n..."

itemsë¥¼ ì§€ì •í•˜ë©´:
/etc/config/
 â””â”€ application.properties  â†’ ë‚´ìš©: "server.port=8080\n..."
```

**4. ì»¤ë§¨ë“œ ì¸ìë¡œ ì£¼ì…**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: config-cmd-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      command: ["./app"]
      args: ["--log-level=$(LOG_LEVEL)"]
      env:
        - name: LOG_LEVEL
          valueFrom:
            configMapKeyRef:
              name: my-config
              key: LOG_LEVEL
```

### ConfigMap ì—…ë°ì´íŠ¸ì™€ ë°˜ì˜

| ì£¼ì… ë°©ì‹ | ConfigMap ìˆ˜ì • ì‹œ ìë™ ë°˜ì˜ | ë¹„ê³  |
| --- | --- | --- |
| í™˜ê²½ ë³€ìˆ˜ (env/envFrom) | **X** â€” Pod ì¬ì‹œì‘ í•„ìš” | í™˜ê²½ ë³€ìˆ˜ëŠ” í”„ë¡œì„¸ìŠ¤ ì‹œì‘ ì‹œ ê²°ì • |
| ë³¼ë¥¨ ë§ˆìš´íŠ¸ | **O** â€” ìë™ ê°±ì‹  (ìˆ˜ì‹­ ì´ˆ~ìˆ˜ ë¶„) | kubeletì˜ sync ì£¼ê¸°ì— ë”°ë¦„ |
| subPath ë³¼ë¥¨ ë§ˆìš´íŠ¸ | **X** â€” ìë™ ê°±ì‹  ì•ˆë¨ | subPathëŠ” ì‹¬ë³¼ë¦­ ë§í¬ ì•„ë‹˜ |

```bash
# ConfigMap ìˆ˜ì •
kubectl edit configmap my-config
kubectl apply -f configmap.yaml

# ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì‹œ ê°±ì‹  í™•ì¸ (Pod ë‚´ë¶€)
watch cat /etc/config/LOG_LEVEL
```

### ì£¼ì˜ì‚¬í•­

- ConfigMapì€ **1MiB** í¬ê¸° ì œí•œ
- ConfigMapì€ **ì•”í˜¸í™”ë˜ì§€ ì•ŠìŒ** â†’ ë¯¼ê° ì •ë³´ëŠ” Secret ì‚¬ìš©
- ConfigMapì´ ì—†ëŠ” ìƒíƒœì—ì„œ Podê°€ ì°¸ì¡°í•˜ë©´ **Pod ìƒì„± ì‹¤íŒ¨** (optional: trueë¡œ íšŒí”¼ ê°€ëŠ¥)
- immutable ConfigMap (`immutable: true`)ì€ ìˆ˜ì • ë¶ˆê°€ â†’ ì‹¤ìˆ˜ ë°©ì§€, ì„±ëŠ¥ í–¥ìƒ

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: immutable-config
immutable: true                # í•œë²ˆ ì„¤ì •í•˜ë©´ ìˆ˜ì • ë¶ˆê°€ (ì‚­ì œ í›„ ì¬ìƒì„±ë§Œ ê°€ëŠ¥)
data:
  ENVIRONMENT: production
```

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‹œí¬ë¦¿(Secret)ì„ ì´ìš©í•´ ì¶”ê°€ ì„¤ì •ì„ ì•”í˜¸í™”í•´ì„œ ë„£ê¸°

**ë¯¼ê° ì •ë³´(ë¹„ë°€ë²ˆí˜¸, í† í°, ì¸ì¦ì„œ ë“±)**ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³  Podì— ì£¼ì…í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜

```
ConfigMap vs Secret:

ConfigMap:
  í‰ë¬¸ ì €ì¥ â†’ DB í˜¸ìŠ¤íŠ¸, í¬íŠ¸, ë¡œê·¸ ë ˆë²¨ ë“± ì¼ë°˜ ì„¤ì •

Secret:
  Base64 ì¸ì½”ë”© ì €ì¥ â†’ ë¹„ë°€ë²ˆí˜¸, API í‚¤, TLS ì¸ì¦ì„œ ë“± ë¯¼ê° ì •ë³´
  (etcdì—ì„œ ì•”í˜¸í™” ê°€ëŠ¥, RBACìœ¼ë¡œ ì ‘ê·¼ ì œì–´)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Pod    â”‚ â†â”€â”€ â”‚ Secret       â”‚
  â”‚          â”‚     â”‚ DB_PASSWORD  â”‚
  â”‚          â”‚     â”‚ API_KEY      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ TLS_CERT     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Secret íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ìš©ë„ |
| --- | --- | --- |
| `Opaque` | ê¸°ë³¸ íƒ€ì…, ì„ì˜ì˜ key-value | ë¹„ë°€ë²ˆí˜¸, API í‚¤ ë“± |
| `kubernetes.io/dockerconfigjson` | Docker ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì¸ì¦ | í”„ë¼ì´ë¹— ì´ë¯¸ì§€ pull |
| `kubernetes.io/tls` | TLS ì¸ì¦ì„œ + í‚¤ | Ingress TLS ë“± |
| `kubernetes.io/basic-auth` | ê¸°ë³¸ ì¸ì¦ | ì‚¬ìš©ìëª…/ë¹„ë°€ë²ˆí˜¸ |
| `kubernetes.io/ssh-auth` | SSH ì¸ì¦ | SSH í”„ë¼ì´ë¹— í‚¤ |
| `kubernetes.io/service-account-token` | SA í† í° | API ì„œë²„ ì¸ì¦ (ìë™ ìƒì„±) |

### Secret ìƒì„±

**ëª…ë ¹í˜• ë°©ì‹**
```bash
# ë¦¬í„°ëŸ´ ê°’ìœ¼ë¡œ ìƒì„±
kubectl create secret generic db-secret \
  --from-literal=username=admin \
  --from-literal=password='S3cur3P@ss!'

# íŒŒì¼ë¡œ ìƒì„±
kubectl create secret generic tls-secret \
  --from-file=tls.crt=./server.crt \
  --from-file=tls.key=./server.key

# TLS Secret ìƒì„± (ì „ìš© ëª…ë ¹)
kubectl create secret tls my-tls-secret \
  --cert=./server.crt \
  --key=./server.key

# Docker ë ˆì§€ìŠ¤íŠ¸ë¦¬ Secret ìƒì„±
kubectl create secret docker-registry regcred \
  --docker-server=https://index.docker.io/v1/ \
  --docker-username=myuser \
  --docker-password=mypass \
  --docker-email=my@email.com
```

**ì„ ì–¸í˜• ë°©ì‹**
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
data:                          # Base64 ì¸ì½”ë”©ëœ ê°’
  username: YWRtaW4=           # echo -n 'admin' | base64
  password: UzNjdXIzUEBzcyE=  # echo -n 'S3cur3P@ss!' | base64
---
# stringDataë¥¼ ì‚¬ìš©í•˜ë©´ í‰ë¬¸ìœ¼ë¡œ ì‘ì„± ê°€ëŠ¥ (ì ìš© ì‹œ ìë™ ì¸ì½”ë”©)
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
stringData:                    # í‰ë¬¸ìœ¼ë¡œ ì‘ì„± â†’ ìë™ Base64 ì¸ì½”ë”©
  username: admin
  password: S3cur3P@ss!
```

```bash
# Base64 ì¸ì½”ë”©/ë””ì½”ë”©
echo -n 'admin' | base64              # YWRtaW4=
echo -n 'YWRtaW4=' | base64 -d        # admin

# Secret í™•ì¸ (ê°’ì€ ìˆ¨ê²¨ì§)
kubectl get secret db-secret
kubectl describe secret db-secret

# Secret ê°’ í™•ì¸ (Base64 ë””ì½”ë”© í•„ìš”)
kubectl get secret db-secret -o jsonpath='{.data.password}' | base64 -d
```

### Secret ì‚¬ìš© ë°©ì‹

ConfigMapê³¼ ë™ì¼í•œ 3ê°€ì§€ ë°©ì‹ (í™˜ê²½ ë³€ìˆ˜, ë³¼ë¥¨ ë§ˆìš´íŠ¸, ì»¤ë§¨ë“œ ì¸ì)

**1. í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: secret-env-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      env:
        - name: DB_USERNAME
          valueFrom:
            secretKeyRef:              # configMapKeyRef ëŒ€ì‹  secretKeyRef
              name: db-secret
              key: username
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: password
```

**2. ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¡œ íŒŒì¼ ì£¼ì…**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: secret-volume-pod
spec:
  containers:
    - name: app
      image: my-app:v1
      volumeMounts:
        - name: secret-vol
          mountPath: /etc/secrets
          readOnly: true
  volumes:
    - name: secret-vol
      secret:
        secretName: db-secret
        defaultMode: 0400              # íŒŒì¼ ê¶Œí•œ ì„¤ì • (ì†Œìœ ì ì½ê¸°ë§Œ)
```

```
ë§ˆìš´íŠ¸ ê²°ê³¼:
/etc/secrets/
 â”œâ”€ username  â†’ ë‚´ìš©: "admin" (ìë™ ë””ì½”ë”©)
 â””â”€ password  â†’ ë‚´ìš©: "S3cur3P@ss!" (ìë™ ë””ì½”ë”©)
```

**3. í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì´ë¯¸ì§€ Pull**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: private-image-pod
spec:
  imagePullSecrets:
    - name: regcred                    # docker-registry Secret ì°¸ì¡°
  containers:
    - name: app
      image: my-private-registry.com/my-app:v1
```

### Secret ë³´ì•ˆ ê°•í™”

```
Secretì˜ ë³´ì•ˆ í•œê³„:
  Base64ëŠ” ì¸ì½”ë”©ì¼ ë¿ ì•”í˜¸í™”ê°€ ì•„ë‹˜!
  etcdì— í‰ë¬¸(ë˜ëŠ” Base64) ì €ì¥ â†’ ëˆ„êµ¬ë“  etcd ì ‘ê·¼í•˜ë©´ ë¹„ë°€ ë…¸ì¶œ

ë³´ì•ˆ ê°•í™” ë°©ë²•:
  1. etcd ì•”í˜¸í™” (EncryptionConfiguration)
  2. RBACìœ¼ë¡œ Secret ì ‘ê·¼ ì œì–´
  3. ì™¸ë¶€ ì‹œí¬ë¦¿ ê´€ë¦¬ì ì—°ë™ (Vault, AWS Secrets Manager ë“±)
```

**etcd ì•”í˜¸í™” ì„¤ì •**
```yaml
# /etc/kubernetes/encryption-config.yaml
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
  - resources:
      - secrets
    providers:
      - aescbc:
          keys:
            - name: key1
              secret: <BASE64_ENCODED_32BYTE_KEY>
      - identity: {}           # ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ê¸°ì¡´ Secret ì½ê¸°ìš©
```

| ë³´ì•ˆ ì¡°ì¹˜ | ì„¤ëª… |
| --- | --- |
| RBAC | Secret ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ get/list ê¶Œí•œ ìµœì†Œí™” |
| etcd ì•”í˜¸í™” | `EncryptionConfiguration`ìœ¼ë¡œ ì €ì¥ ì‹œ ì•”í˜¸í™” |
| ê°ì‚¬ ë¡œê·¸ | Secret ì ‘ê·¼ ì´ë²¤íŠ¸ ë¡œê¹… |
| ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²©ë¦¬ | Secretì€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë²”ìœ„ â€” ë‹¤ë¥¸ NSì—ì„œ ì ‘ê·¼ ë¶ˆê°€ |
| ì™¸ë¶€ ì—°ë™ | HashiCorp Vault, AWS Secrets Manager, Sealed Secrets ë“± |

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡¤ë§ ì—…ë°ì´íŠ¸(set, rollout)

**ë¬´ì¤‘ë‹¨ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒˆ ë²„ì „ìœ¼ë¡œ êµì²´**í•˜ëŠ” ë°°í¬ ì „ëµ

```
ë¡¤ë§ ì—…ë°ì´íŠ¸ ê³¼ì • (maxSurge=1, maxUnavailable=0):

Step 1:  [v1] [v1] [v1]              â† í˜„ì¬ ìƒíƒœ (replicas=3)
Step 2:  [v1] [v1] [v1] [v2]         â† ìƒˆ Pod 1ê°œ ì¶”ê°€ (maxSurge=1)
Step 3:  [v1] [v1] [  ] [v2]         â† v1 Pod 1ê°œ ì¢…ë£Œ
Step 4:  [v1] [v1] [v2] [v2]         â† ìƒˆ Pod 1ê°œ ì¶”ê°€
Step 5:  [v1] [  ] [v2] [v2]         â† v1 Pod 1ê°œ ì¢…ë£Œ
Step 6:  [v1] [v2] [v2] [v2]         â† ìƒˆ Pod 1ê°œ ì¶”ê°€
Step 7:  [  ] [v2] [v2] [v2]         â† v1 Pod 1ê°œ ì¢…ë£Œ
Step 8:  [v2] [v2] [v2]              â† ì™„ë£Œ!
```

### Deploymentì˜ ë°°í¬ ì „ëµ

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 3
  strategy:
    type: RollingUpdate             # ê¸°ë³¸ê°’
    rollingUpdate:
      maxSurge: 1                   # ìµœëŒ€ ì´ˆê³¼ Pod ìˆ˜ (ë˜ëŠ” ë¹„ìœ¨ "25%")
      maxUnavailable: 0             # ìµœëŒ€ ë¶ˆê°€ìš© Pod ìˆ˜ (ë˜ëŠ” ë¹„ìœ¨ "25%")
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: app
          image: my-app:v1
```

**strategy íƒ€ì…**
| íƒ€ì… | ì„¤ëª… | ë‹¤ìš´íƒ€ì„ |
| --- | --- | --- |
| `RollingUpdate` (ê¸°ë³¸) | ì ì§„ì ìœ¼ë¡œ ìƒˆ Pod ìƒì„± + êµ¬ Pod ì œê±° | ì—†ìŒ |
| `Recreate` | ê¸°ì¡´ Pod ëª¨ë‘ ì‚­ì œ í›„ ìƒˆ Pod ìƒì„± | ìˆìŒ |

**maxSurgeì™€ maxUnavailable**
| íŒŒë¼ë¯¸í„° | ì˜ë¯¸ | ê¸°ë³¸ê°’ |
| --- | --- | --- |
| `maxSurge` | replicas ìˆ˜ë¥¼ ì´ˆê³¼í•˜ì—¬ ìƒì„± ê°€ëŠ¥í•œ Pod ìˆ˜ | 25% |
| `maxUnavailable` | ì—…ë°ì´íŠ¸ ì¤‘ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆëŠ” Pod ìˆ˜ | 25% |

```
ì˜ˆì‹œ: replicas=4

maxSurge=25%, maxUnavailable=25%:
  ìµœëŒ€ Pod ìˆ˜: 4 + 1(25%) = 5
  ìµœì†Œ ê°€ìš© Pod: 4 - 1(25%) = 3
  â†’ ë™ì‹œì— ìµœëŒ€ 5ê°œ Pod, ìµœì†Œ 3ê°œ ê°€ìš©

maxSurge=1, maxUnavailable=0:
  ìµœëŒ€ Pod ìˆ˜: 4 + 1 = 5
  ìµœì†Œ ê°€ìš© Pod: 4 - 0 = 4
  â†’ í•­ìƒ 4ê°œ ê°€ìš© ë³´ì¥ (ê°€ì¥ ì•ˆì „í•˜ì§€ë§Œ ëŠë¦¼)

maxSurge=0, maxUnavailable=1:
  ìµœëŒ€ Pod ìˆ˜: 4 + 0 = 4
  ìµœì†Œ ê°€ìš© Pod: 4 - 1 = 3
  â†’ ë¦¬ì†ŒìŠ¤ ì¶”ê°€ ì—†ì´ ë°°í¬ (ë¦¬ì†ŒìŠ¤ ì œí•œ í™˜ê²½)
```

### "ê°€ìš©(Available)"ì˜ íŒë‹¨ ê¸°ì¤€ â€” readinessProbe

ë¡¤ë§ ì—…ë°ì´íŠ¸ì—ì„œ **Podê°€ "ê°€ìš©"ìœ¼ë¡œ ì¹´ìš´íŠ¸ë˜ë ¤ë©´ readinessProbeë¥¼ í†µê³¼**í•´ì•¼ í•¨

```
ìƒˆ Pod ìƒì„±
    â”‚
    â–¼
readinessProbe ì‹¤í–‰
    â”‚
    â”œâ”€ ì‹¤íŒ¨ â†’ "ê°€ìš©í•˜ì§€ ì•ŠìŒ" â†’ maxUnavailable ì¹´ìš´íŠ¸ì— í¬í•¨
    â”‚         Service ì—”ë“œí¬ì¸íŠ¸ì—ë„ ë¯¸ë“±ë¡ (íŠ¸ë˜í”½ ì•ˆ ê°)
    â”‚
    â””â”€ ì„±ê³µ â†’ minReadySeconds ê²½ê³¼ í™•ì¸
                â”‚
                â”œâ”€ ë¯¸ê²½ê³¼ â†’ ì•„ì§ "ê°€ìš©í•˜ì§€ ì•ŠìŒ"
                â”‚
                â””â”€ ê²½ê³¼ â†’ "ê°€ìš©(Available)" íŒì •
                          â†’ ê¸°ì¡´ Pod í•˜ë‚˜ ì¢…ë£Œ ì§„í–‰
```

```
replicas=3, maxSurge=1, maxUnavailable=0 + readinessProbe ì„¤ì • ì‹œ:

Step 1: [v1âœ…] [v1âœ…] [v1âœ…]           ê°€ìš©=3, ìµœì†Œ ê°€ìš©=3 âœ…
Step 2: [v1âœ…] [v1âœ…] [v1âœ…] [v2â³]    v2 ìƒì„±, readinessProbe ì•„ì§ ë¯¸í†µê³¼
                                       ê°€ìš©=3 (v2ëŠ” ë¯¸ì¹´ìš´íŠ¸)
Step 3: [v1âœ…] [v1âœ…] [v1âœ…] [v2âœ…]    v2 readinessProbe í†µê³¼!
                                       ê°€ìš©=4 â†’ ì´ì œ v1 í•˜ë‚˜ ì¢…ë£Œ ê°€ëŠ¥
Step 4: [v1âœ…] [v1âœ…] [v1ğŸ”»] [v2âœ…]    v1 í•˜ë‚˜ ì¢…ë£Œ ì‹œì‘
...
```

| ìƒí™© | ê°€ìš© íŒì • |
| --- | --- |
| readinessProbe ë¯¸ì„¤ì • | ì»¨í…Œì´ë„ˆ Running ì¦‰ì‹œ ê°€ìš© |
| readinessProbe ì„±ê³µ | ê°€ìš© (+ minReadySeconds ëŒ€ê¸° í›„) |
| readinessProbe ì‹¤íŒ¨ | ê°€ìš©í•˜ì§€ ì•ŠìŒ â†’ ë¡¤ë§ ì—…ë°ì´íŠ¸ ì§„í–‰ ë©ˆì¶¤ |
| readinessProbe ê³„ì† ì‹¤íŒ¨ | `progressDeadlineSeconds`(ê¸°ë³¸ 600ì´ˆ) ì´ˆê³¼ ì‹œ ë°°í¬ ì‹¤íŒ¨ |

- readinessProbeê°€ ë¡¤ë§ ì—…ë°ì´íŠ¸ì˜ **ì•ˆì „ì¥ì¹˜** ì—­í• 
- ìƒˆ ë²„ì „ì— ë¬¸ì œê°€ ìˆìœ¼ë©´ readinessProbe ì‹¤íŒ¨ â†’ ìë™ìœ¼ë¡œ ë°°í¬ ì¤‘ë‹¨ â†’ ê¸°ì¡´ ë²„ì „ ìœ ì§€

### kubectl setìœ¼ë¡œ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸

```bash
# ì´ë¯¸ì§€ ë³€ê²½ â†’ ë¡¤ë§ ì—…ë°ì´íŠ¸ ì‹œì‘
kubectl set image deployment/my-app app=my-app:v2

# ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ë™ì‹œ ë³€ê²½
kubectl set image deployment/my-app app=my-app:v2 sidecar=sidecar:v3

# ì—…ë°ì´íŠ¸ ì‚¬ìœ  ê¸°ë¡ (--recordëŠ” deprecated â†’ annotation ì‚¬ìš©)
kubectl annotate deployment/my-app kubernetes.io/change-cause="Update to v2"
```

### kubectl rolloutìœ¼ë¡œ ë°°í¬ ê´€ë¦¬

```bash
# ë°°í¬ ìƒíƒœ í™•ì¸
kubectl rollout status deployment/my-app
# Waiting for deployment "my-app" rollout to finish: 1 out of 3 new replicas have been updated...
# deployment "my-app" successfully rolled out

# ë°°í¬ ì¼ì‹œ ì¤‘ì§€ (ì¹´ë‚˜ë¦¬ ë°°í¬ì²˜ëŸ¼ í™œìš©)
kubectl rollout pause deployment/my-app

# ì¼ì‹œ ì¤‘ì§€ ìƒíƒœì—ì„œ ì—¬ëŸ¬ ë³€ê²½ ì ìš©
kubectl set image deployment/my-app app=my-app:v2
kubectl set resources deployment/my-app -c app --limits=cpu=500m,memory=256Mi

# ë°°í¬ ì¬ê°œ (ì¼ê´„ ì ìš©)
kubectl rollout resume deployment/my-app

# ë°°í¬ ì´ë ¥ í™•ì¸
kubectl rollout history deployment/my-app
# REVISION  CHANGE-CAUSE
# 1         <none>
# 2         Update to v2
# 3         Update to v3

# íŠ¹ì • ë¦¬ë¹„ì „ ìƒì„¸ í™•ì¸
kubectl rollout history deployment/my-app --revision=2
```

### ë¡¤ë°± (rollout undo)

```
ë¡¤ë°± íë¦„:
  v3 (í˜„ì¬, ë¬¸ì œ ë°œìƒ!) â†’ rollout undo â†’ v2 (ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µê·€)

  [v3] [v3] [v3]  â†’  rollout undo  â†’  [v2] [v2] [v2]
```

```bash
# ì§ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
kubectl rollout undo deployment/my-app

# íŠ¹ì • ë¦¬ë¹„ì „ìœ¼ë¡œ ë¡¤ë°±
kubectl rollout undo deployment/my-app --to-revision=1

# ë¡¤ë°± í›„ ìƒíƒœ í™•ì¸
kubectl rollout status deployment/my-app
```

### revisionHistoryLimit

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  revisionHistoryLimit: 10          # ë³´ê´€í•  ReplicaSet ìˆ˜ (ê¸°ë³¸ê°’: 10)
  # ...
```

- DeploymentëŠ” ì´ì „ ë²„ì „ì˜ **ReplicaSetì„ ë³´ê´€**í•˜ì—¬ ë¡¤ë°± ê°€ëŠ¥
- `revisionHistoryLimit`ì´ 0ì´ë©´ ë¡¤ë°± ë¶ˆê°€
- ì˜¤ë˜ëœ ReplicaSetì€ ìë™ ì‚­ì œ

### ë°°í¬ ê³¼ì •ì—ì„œ ë‚´ë¶€ ë™ì‘

```
kubectl set image â†’ Deployment ì—…ë°ì´íŠ¸
                        â”‚
                        â–¼
              ìƒˆ ReplicaSet ìƒì„± (replicas: 0 â†’ ì ì§„ ì¦ê°€)
                        â”‚
                        â–¼
              ê¸°ì¡´ ReplicaSet ì¶•ì†Œ (replicas: 3 â†’ ì ì§„ ê°ì†Œ)

Deployment
 â”œâ”€ ReplicaSet (v1, replicas: 0)  â† ë³´ê´€ (ë¡¤ë°±ìš©)
 â”œâ”€ ReplicaSet (v2, replicas: 0)  â† ë³´ê´€
 â””â”€ ReplicaSet (v3, replicas: 3)  â† í˜„ì¬ í™œì„±
```

```bash
# ReplicaSet í™•ì¸
kubectl get replicaset
# NAME                   DESIRED   CURRENT   READY   AGE
# my-app-6b7d8f9c5d     3         3         3       1m   â† í˜„ì¬ (v3)
# my-app-5c8d7e4b3a     0         0         0       1h   â† ì´ì „ (v2)
# my-app-4a7c6d3e2f     0         0         0       2h   â† ì´ì „ (v1)
```

### minReadySeconds

```yaml
spec:
  minReadySeconds: 30              # ìƒˆ Podê°€ Ready í›„ 30ì´ˆ ëŒ€ê¸° í›„ ë‹¤ìŒ ì§„í–‰
  progressDeadlineSeconds: 600     # 10ë¶„ ë‚´ ë°°í¬ ë¯¸ì™„ë£Œ ì‹œ ì‹¤íŒ¨ ì²˜ë¦¬
```

- `minReadySeconds`: ìƒˆ Podê°€ Ready ìƒíƒœê°€ ëœ í›„ **ì¶”ê°€ ëŒ€ê¸° ì‹œê°„** (ì•ˆì •ì„± í™•ì¸)
- `progressDeadlineSeconds`: ë°°í¬ê°€ ì§„í–‰ë˜ì§€ ì•Šìœ¼ë©´ ì‹¤íŒ¨ë¡œ íŒë‹¨í•˜ëŠ” ì‹œê°„ (ê¸°ë³¸ 600ì´ˆ)

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë™ì ìœ¼ë¡œ ë°°í¬í•˜ê¸°(kustomize)

**ê¸°ë³¸ YAML(base)ì„ ìœ ì§€í•˜ë©´ì„œ í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ì„¤ì •ì„ ì˜¤ë²„ë ˆì´(overlay)**í•˜ëŠ” ë„êµ¬

```
ê¸°ì¡´ ë¬¸ì œ:
  dev.yaml, staging.yaml, prod.yaml â†’ ì¤‘ë³µì´ ë§ê³  ê´€ë¦¬ í˜ë“¦

Kustomize í•´ê²°:
  base (ê³µí†µ) + overlay (í™˜ê²½ë³„ ì°¨ì´ë§Œ) â†’ ì¡°í•©í•˜ì—¬ ìµœì¢… YAML ìƒì„±

  base/
   â”œâ”€ deployment.yaml     â† ê³µí†µ ì„¤ì •
   â”œâ”€ service.yaml
   â””â”€ kustomization.yaml

  overlays/
   â”œâ”€ dev/
   â”‚   â””â”€ kustomization.yaml   â† replicas: 1, ì´ë¯¸ì§€ íƒœê·¸: dev
   â”œâ”€ staging/
   â”‚   â””â”€ kustomization.yaml   â† replicas: 2, ì´ë¯¸ì§€ íƒœê·¸: staging
   â””â”€ prod/
       â””â”€ kustomization.yaml   â† replicas: 5, ì´ë¯¸ì§€ íƒœê·¸: v1.2.3
```

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
my-app/
 â”œâ”€ base/
 â”‚   â”œâ”€ deployment.yaml
 â”‚   â”œâ”€ service.yaml
 â”‚   â”œâ”€ configmap.yaml
 â”‚   â””â”€ kustomization.yaml        â† base ë¦¬ì†ŒìŠ¤ ëª©ë¡
 â””â”€ overlays/
     â”œâ”€ dev/
     â”‚   â”œâ”€ kustomization.yaml     â† base ì°¸ì¡° + dev íŒ¨ì¹˜
     â”‚   â””â”€ replica-patch.yaml
     â””â”€ prod/
         â”œâ”€ kustomization.yaml     â† base ì°¸ì¡° + prod íŒ¨ì¹˜
         â””â”€ replica-patch.yaml
```

### base ì„¤ì •

```yaml
# base/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-app
  template:
    metadata:
      labels:
        app: my-app
    spec:
      containers:
        - name: app
          image: my-app:latest
          ports:
            - containerPort: 8080
```

```yaml
# base/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-app
spec:
  selector:
    app: my-app
  ports:
    - port: 80
      targetPort: 8080
```

```yaml
# base/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - deployment.yaml
  - service.yaml
```

### overlay ì„¤ì •

```yaml
# overlays/dev/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base                       # base ë””ë ‰í† ë¦¬ ì°¸ì¡°
namePrefix: dev-                     # ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì´ë¦„ì— ì ‘ë‘ì‚¬
namespace: dev                       # ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì§€ì •
commonLabels:                        # ê³µí†µ ë ˆì´ë¸” ì¶”ê°€
  environment: dev
images:                              # ì´ë¯¸ì§€ íƒœê·¸ ë³€ê²½
  - name: my-app
    newTag: dev-latest
patches:                             # íŒ¨ì¹˜ ì ìš©
  - target:
      kind: Deployment
      name: my-app
    patch: |
      - op: replace
        path: /spec/replicas
        value: 1
```

```yaml
# overlays/prod/kustomization.yaml
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
namePrefix: prod-
namespace: production
commonLabels:
  environment: production
images:
  - name: my-app
    newTag: v1.2.3
patches:
  - target:
      kind: Deployment
      name: my-app
    patch: |
      - op: replace
        path: /spec/replicas
        value: 5
```

### Kustomize ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ì˜ˆì‹œ |
| --- | --- | --- |
| `namePrefix` / `nameSuffix` | ë¦¬ì†ŒìŠ¤ ì´ë¦„ì— ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ | `dev-my-app` |
| `namespace` | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¼ê´„ ì§€ì • | `namespace: dev` |
| `commonLabels` | ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ë ˆì´ë¸” ì¶”ê°€ | `env: dev` |
| `commonAnnotations` | ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€ | |
| `images` | ì´ë¯¸ì§€ ì´ë¦„/íƒœê·¸ ë³€ê²½ | `newTag: v2.0.0` |
| `configMapGenerator` | ConfigMap ìë™ ìƒì„± | íŒŒì¼/ë¦¬í„°ëŸ´ì—ì„œ ìƒì„± |
| `secretGenerator` | Secret ìë™ ìƒì„± | íŒŒì¼/ë¦¬í„°ëŸ´ì—ì„œ ìƒì„± |
| `patches` | ë¦¬ì†ŒìŠ¤ ë¶€ë¶„ ìˆ˜ì • | JSON Patch, Strategic Merge Patch |

**configMapGenerator / secretGenerator**
```yaml
# kustomization.yaml
configMapGenerator:
  - name: app-config
    literals:
      - DB_HOST=mysql
      - DB_PORT=3306
    files:
      - app.properties
    # â†’ ì´ë¦„ì— í•´ì‹œ suffix ìë™ ì¶”ê°€: app-config-8g2c5k7h
    #   ConfigMap ë³€ê²½ ì‹œ ìƒˆ ì´ë¦„ â†’ Pod ìë™ ì¬ì‹œì‘

secretGenerator:
  - name: db-secret
    literals:
      - username=admin
      - password=secret123
    type: Opaque
```

### kubectl ì‚¬ìš©

```bash
# ë¹Œë“œ ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸° (ì‹¤ì œ ì ìš© ì•ˆí•¨)
kubectl kustomize overlays/dev

# ì ìš©
kubectl apply -k overlays/dev

# ì‚­ì œ
kubectl delete -k overlays/dev

# kustomize ë…ë¦½ ì‹¤í–‰ (kubectlì— ë‚´ì¥ëœ ê²ƒë³´ë‹¤ ìµœì‹  ë²„ì „ ì‚¬ìš© ê°€ëŠ¥)
kustomize build overlays/prod | kubectl apply -f -
```

```
kubectl kustomize overlays/dev ì‹¤í–‰ ê²°ê³¼:

baseì˜ deployment.yaml + overlayì˜ íŒ¨ì¹˜ê°€ í•©ì³ì§„ ìµœì¢… YAML ì¶œë ¥:
  - name: dev-my-app (ì ‘ë‘ì‚¬ ì¶”ê°€)
  - namespace: dev
  - replicas: 1
  - image: my-app:dev-latest
  - labelsì— environment: dev ì¶”ê°€
```

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë”ìš±ë” ì‰½ê²Œ ë°°í¬í•˜ê¸°(helm)

Kubernetesì˜ **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €** â€” ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€(Chart)ë¡œ ê´€ë¦¬

```
ë¹„ìœ :
  apt/yumì´ ë¦¬ëˆ…ìŠ¤ì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì¸ ê²ƒì²˜ëŸ¼
  Helmì€ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €

  apt install nginx      â†’  helm install my-nginx bitnami/nginx
  apt upgrade nginx      â†’  helm upgrade my-nginx bitnami/nginx
  apt remove nginx       â†’  helm uninstall my-nginx

Helmì˜ 3ê°€ì§€ í•µì‹¬ ê°œë…:
  Chart      â†’ íŒ¨í‚¤ì§€ (YAML í…œí”Œë¦¿ + ê¸°ë³¸ê°’)
  Release    â†’ Chartì˜ ì„¤ì¹˜ ì¸ìŠ¤í„´ìŠ¤ (ê°™ì€ Chartë¥¼ ì—¬ëŸ¬ ë²ˆ ì„¤ì¹˜ ê°€ëŠ¥)
  Repository â†’ Chart ì €ì¥ì†Œ (bitnami, stable ë“±)
```

### Chart êµ¬ì¡°

```
my-chart/
 â”œâ”€ Chart.yaml              # ì°¨íŠ¸ ë©”íƒ€ë°ì´í„° (ì´ë¦„, ë²„ì „, ì„¤ëª…)
 â”œâ”€ values.yaml             # ê¸°ë³¸ ì„¤ì •ê°’
 â”œâ”€ templates/              # Kubernetes ë§¤ë‹ˆí˜ìŠ¤íŠ¸ í…œí”Œë¦¿
 â”‚   â”œâ”€ deployment.yaml
 â”‚   â”œâ”€ service.yaml
 â”‚   â”œâ”€ ingress.yaml
 â”‚   â”œâ”€ configmap.yaml
 â”‚   â”œâ”€ _helpers.tpl        # í…œí”Œë¦¿ í—¬í¼ í•¨ìˆ˜
 â”‚   â””â”€ NOTES.txt           # ì„¤ì¹˜ í›„ ì•ˆë‚´ ë©”ì‹œì§€
 â”œâ”€ charts/                 # ì˜ì¡´ ì°¨íŠ¸ (ì„œë¸Œì°¨íŠ¸)
 â””â”€ .helmignore             # íŒ¨í‚¤ì§• ì‹œ ì œì™¸ íŒŒì¼
```

**Chart.yaml**
```yaml
apiVersion: v2
name: my-app
description: My Application Helm Chart
type: application
version: 0.1.0          # ì°¨íŠ¸ ë²„ì „
appVersion: "1.2.3"     # ì• í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „
dependencies:
  - name: mysql
    version: "9.x.x"
    repository: https://charts.bitnami.com/bitnami
```

**values.yaml (ê¸°ë³¸ê°’)**
```yaml
replicaCount: 3
image:
  repository: my-app
  tag: "v1.2.3"
  pullPolicy: IfNotPresent
service:
  type: ClusterIP
  port: 80
resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 250m
    memory: 128Mi
```

**templates/deployment.yaml (Go í…œí”Œë¦¿)**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "my-chart.fullname" . }}
  labels:
    {{- include "my-chart.labels" . | nindent 4 }}
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      {{- include "my-chart.selectorLabels" . | nindent 6 }}
  template:
    metadata:
      labels:
        {{- include "my-chart.selectorLabels" . | nindent 8 }}
    spec:
      containers:
        - name: {{ .Chart.Name }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
          imagePullPolicy: {{ .Values.image.pullPolicy }}
          ports:
            - containerPort: 8080
          resources:
            {{- toYaml .Values.resources | nindent 12 }}
```

### Helm ê¸°ë³¸ ëª…ë ¹ì–´

```bash
# ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update

# ì°¨íŠ¸ ê²€ìƒ‰
helm search repo nginx
helm search hub wordpress           # Artifact Hub ê²€ìƒ‰

# ì°¨íŠ¸ ì„¤ì¹˜
helm install my-release bitnami/nginx
helm install my-release bitnami/nginx -n my-namespace --create-namespace

# values ì˜¤ë²„ë¼ì´ë“œ (--set ë˜ëŠ” -f)
helm install my-release bitnami/nginx \
  --set replicaCount=3 \
  --set service.type=LoadBalancer

helm install my-release bitnami/nginx -f my-values.yaml

# ì„¤ì¹˜ ì „ ë Œë”ë§ í™•ì¸ (--dry-run)
helm install my-release bitnami/nginx --dry-run

# í…œí”Œë¦¿ ë Œë”ë§ë§Œ í™•ì¸ (í´ëŸ¬ìŠ¤í„° ì ‘ê·¼ ë¶ˆí•„ìš”)
helm template my-release bitnami/nginx -f my-values.yaml
```

### Release ê´€ë¦¬

```bash
# ë¦´ë¦¬ìŠ¤ ëª©ë¡
helm list
helm list -n my-namespace
helm list --all-namespaces

# ë¦´ë¦¬ìŠ¤ ìƒíƒœ í™•ì¸
helm status my-release

# ì—…ê·¸ë ˆì´ë“œ
helm upgrade my-release bitnami/nginx --set replicaCount=5
helm upgrade my-release bitnami/nginx -f new-values.yaml

# ì—…ê·¸ë ˆì´ë“œ + ì—†ìœ¼ë©´ ì„¤ì¹˜ (CI/CDì—ì„œ ìœ ìš©)
helm upgrade --install my-release bitnami/nginx -f values.yaml

# ë¡¤ë°±
helm rollback my-release                # ì§ì „ ë¦¬ë¹„ì „ìœ¼ë¡œ
helm rollback my-release 1              # íŠ¹ì • ë¦¬ë¹„ì „ìœ¼ë¡œ

# ë¦¬ë¹„ì „ ì´ë ¥ í™•ì¸
helm history my-release

# ì‚­ì œ
helm uninstall my-release
```

### Kustomize vs Helm ë¹„êµ

| ë¹„êµ í•­ëª© | Kustomize | Helm |
| --- | --- | --- |
| ì ‘ê·¼ ë°©ì‹ | íŒ¨ì¹˜/ì˜¤ë²„ë ˆì´ (YAML ì§ì ‘ ìˆ˜ì •) | í…œí”Œë¦¿ ì—”ì§„ (Go template) |
| í•™ìŠµ ê³¡ì„  | ë‚®ìŒ (ìˆœìˆ˜ YAML) | ì¤‘ê°„ (Go í…œí”Œë¦¿ ë¬¸ë²•) |
| íŒ¨í‚¤ì§€ ê´€ë¦¬ | ì—†ìŒ | Chart ë¦¬í¬ì§€í† ë¦¬ |
| ë¦´ë¦¬ìŠ¤ ê´€ë¦¬ | ì—†ìŒ | ë¦´ë¦¬ìŠ¤ ë²„ì „ ê´€ë¦¬, ë¡¤ë°± |
| ì˜ì¡´ì„± ê´€ë¦¬ | ì—†ìŒ | ì„œë¸Œì°¨íŠ¸, dependencies |
| ë‚´ì¥ ì—¬ë¶€ | kubectlì— ë‚´ì¥ (`-k`) | ë³„ë„ ì„¤ì¹˜ í•„ìš” |
| ì í•©í•œ ìƒí™© | í™˜ê²½ë³„ ì„¤ì • ì°¨ì´ê°€ ì ì„ ë•Œ | ë³µì¡í•œ ì•±, ì¬ì‚¬ìš©/ë°°í¬ íŒ¨í‚¤ì§€ |

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìì› ì‚¬ìš©ëŸ‰ í™•ì¸í•˜ê¸°(ë©”íŠ¸ë¦­ ì„œë²„ / Metrics-server)

**í´ëŸ¬ìŠ¤í„° ë‚´ ë…¸ë“œì™€ Podì˜ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìˆ˜ì§‘**í•˜ëŠ” ê²½ëŸ‰ ëª¨ë‹ˆí„°ë§ ì»´í¬ë„ŒíŠ¸

```
Metrics Server ì—­í• :

ê° ë…¸ë“œì˜ kubelet (cAdvisor)
  â”œâ”€ Node-1 kubelet â”€â”€â†’ CPU/Memory ë©”íŠ¸ë¦­
  â”œâ”€ Node-2 kubelet â”€â”€â†’ CPU/Memory ë©”íŠ¸ë¦­
  â””â”€ Node-3 kubelet â”€â”€â†’ CPU/Memory ë©”íŠ¸ë¦­
          â”‚
          â–¼
    Metrics Server (ìˆ˜ì§‘ & ì§‘ê³„)
          â”‚
          â–¼
    Metrics API (/apis/metrics.k8s.io/v1beta1)
          â”‚
          â”œâ”€â”€â†’ kubectl top         (ì‚¬ìš©ì ì¡°íšŒ)
          â”œâ”€â”€â†’ HPA                 (ìë™ ìŠ¤ì¼€ì¼ë§ íŒë‹¨)
          â””â”€â”€â†’ VPA                 (ìë™ ë¦¬ì†ŒìŠ¤ ì¡°ì •)
```

### ì„¤ì¹˜

```bash
# Metrics Server ì„¤ì¹˜
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml

# ë˜ëŠ” Helmìœ¼ë¡œ ì„¤ì¹˜
helm repo add metrics-server https://kubernetes-sigs.github.io/metrics-server/
helm install metrics-server metrics-server/metrics-server -n kube-system

# ì„¤ì¹˜ í™•ì¸
kubectl get deployment metrics-server -n kube-system
kubectl get apiservice v1beta1.metrics.k8s.io
# AVAILABLEê°€ Trueì—¬ì•¼ í•¨
```

### Metrics Server íŠ¹ì§•

| í•­ëª© | ì„¤ëª… |
| --- | --- |
| ìˆ˜ì§‘ ì£¼ê¸° | ê¸°ë³¸ 15ì´ˆ ê°„ê²© |
| ì €ì¥ ê¸°ê°„ | **ë©”ëª¨ë¦¬ì—ë§Œ ì €ì¥** â€” ìµœì‹  ê°’ë§Œ ìœ ì§€ (íˆìŠ¤í† ë¦¬ ì—†ìŒ) |
| ìš©ë„ | kubectl top, HPA, VPAì˜ ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ì†ŒìŠ¤ |
| í•œê³„ | ê³¼ê±° ë°ì´í„° ì¡°íšŒ ë¶ˆê°€ â†’ ì¥ê¸° ëª¨ë‹ˆí„°ë§ì€ Prometheus ë“± ì‚¬ìš© |

```
ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì—­í•  ë¶„ë‹´:

Metrics Server â†’ ì‹¤ì‹œê°„ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ (HPA, kubectl top)
Prometheus     â†’ ì‹œê³„ì—´ ë©”íŠ¸ë¦­ ìˆ˜ì§‘, ì¥ê¸° ì €ì¥, ì•Œë¦¼
Grafana        â†’ ëŒ€ì‹œë³´ë“œ ì‹œê°í™”
```

---

## ìì› ìƒíƒœì— ë”°ë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™ìœ¼ë¡œ ì¡°ì ˆí•˜ê¸°(HPA)

**Horizontal Pod Autoscaler** â€” Podì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì´ë‚˜ ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ì— ë”°ë¼ **Pod ìˆ˜ë¥¼ ìë™ ì¡°ì ˆ**

```
HPA ë™ì‘ ì›ë¦¬:

  Metrics Server â”€â”€(ë©”íŠ¸ë¦­ ìˆ˜ì§‘)â”€â”€â†’ HPA Controller
                                        â”‚
                                   í˜„ì¬ CPU: 80%
                                   ëª©í‘œ CPU: 50%
                                        â”‚
                                        â–¼
                                  "Podê°€ ë¶€ì¡±í•˜ë‹¤"
                                        â”‚
                                        â–¼
                              Deployment replicas ì¦ê°€
                                   3 â†’ 5ê°œ

  ë¶€í•˜ ì¦ê°€ ì‹œ (Scale Out):
    [Pod] [Pod] [Pod]  â†’  [Pod] [Pod] [Pod] [Pod] [Pod]

  ë¶€í•˜ ê°ì†Œ ì‹œ (Scale In):
    [Pod] [Pod] [Pod] [Pod] [Pod]  â†’  [Pod] [Pod] [Pod]
```

### HPA ìƒì„±

**ëª…ë ¹í˜• ë°©ì‹**
```bash
# CPU ì‚¬ìš©ë¥  50% ê¸°ì¤€, ìµœì†Œ 2ê°œ ~ ìµœëŒ€ 10ê°œ
kubectl autoscale deployment my-app \
  --cpu-percent=50 \
  --min=2 \
  --max=10
```

**ì„ ì–¸í˜• ë°©ì‹ (v2)**
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: my-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: my-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 50     # í‰ê·  CPU ì‚¬ìš©ë¥  50% ìœ ì§€ ëª©í‘œ
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 70     # í‰ê·  ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  70% ìœ ì§€ ëª©í‘œ
```

### ìŠ¤ì¼€ì¼ë§ ê³„ì‚° ê³µì‹

```
í•„ìš” Pod ìˆ˜ = ceil(í˜„ì¬ Pod ìˆ˜ Ã— (í˜„ì¬ ë©”íŠ¸ë¦­ ê°’ / ëª©í‘œ ë©”íŠ¸ë¦­ ê°’))

ì˜ˆì‹œ:
  í˜„ì¬ Pod ìˆ˜: 3
  í˜„ì¬ í‰ê·  CPU: 90%
  ëª©í‘œ CPU: 50%

  í•„ìš” Pod ìˆ˜ = ceil(3 Ã— (90 / 50)) = ceil(5.4) = 6
  â†’ 3ê°œ â†’ 6ê°œë¡œ ìŠ¤ì¼€ì¼ ì•„ì›ƒ
```

### HPA ë™ì‘ ì¡°ê±´

- **ì „ì œ: Podì— resources.requestsê°€ ë°˜ë“œì‹œ ì„¤ì •**ë˜ì–´ ìˆì–´ì•¼ í•¨
  - requests ëŒ€ë¹„ ì‚¬ìš©ë¥ (%)ì„ ê³„ì‚°í•˜ê¸° ë•Œë¬¸
- **Metrics Serverê°€ ì„¤ì¹˜**ë˜ì–´ ìˆì–´ì•¼ í•¨

```yaml
# HPAê°€ ë™ì‘í•˜ë ¤ë©´ Podì— requests ì„¤ì • í•„ìˆ˜
spec:
  containers:
    - name: app
      image: my-app:v1
      resources:
        requests:
          cpu: "200m"          # ì´ ê°’ ëŒ€ë¹„ ì‚¬ìš©ë¥  ê³„ì‚°
          memory: "256Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
```

### ë©”íŠ¸ë¦­ íƒ€ì…

```yaml
metrics:
  # 1. Resource â€” CPU/Memory (ê°€ì¥ ì¼ë°˜ì )
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization              # requests ëŒ€ë¹„ í¼ì„¼íŠ¸
        averageUtilization: 50

  # 2. Resource â€” ì ˆëŒ€ê°’ ê¸°ì¤€
  - type: Resource
    resource:
      name: memory
      target:
        type: AverageValue             # Podë‹¹ í‰ê·  ì‚¬ìš©ëŸ‰
        averageValue: 500Mi

  # 3. Pods â€” ì»¤ìŠ¤í…€ ë©”íŠ¸ë¦­ (Pod ë‹¨ìœ„)
  - type: Pods
    pods:
      metric:
        name: packets-per-second
      target:
        type: AverageValue
        averageValue: 1k

  # 4. Object â€” ì™¸ë¶€ ì˜¤ë¸Œì íŠ¸ ë©”íŠ¸ë¦­
  - type: Object
    object:
      describedObject:
        apiVersion: networking.k8s.io/v1
        kind: Ingress
        name: main-route
      metric:
        name: requests-per-second
      target:
        type: Value
        value: 10k
```

### ìŠ¤ì¼€ì¼ë§ ë™ì‘ ì œì–´ (behavior)

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: my-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: my-app
  minReplicas: 2
  maxReplicas: 20
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 50
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 0      # ì¦‰ì‹œ ìŠ¤ì¼€ì¼ ì•„ì›ƒ
      policies:
        - type: Percent
          value: 100                     # í˜„ì¬ì˜ 100%ê¹Œì§€ í•œ ë²ˆì— ì¦ê°€
          periodSeconds: 60
        - type: Pods
          value: 4                       # ë˜ëŠ” í•œ ë²ˆì— ìµœëŒ€ 4ê°œ ì¶”ê°€
          periodSeconds: 60
      selectPolicy: Max                  # ë‘ ì •ì±… ì¤‘ ë” ë§ì€ ìª½ ì„ íƒ
    scaleDown:
      stabilizationWindowSeconds: 300    # 5ë¶„ê°„ ì•ˆì •í™” í›„ ìŠ¤ì¼€ì¼ ë‹¤ìš´
      policies:
        - type: Percent
          value: 10                      # í•œ ë²ˆì— 10%ì”©ë§Œ ê°ì†Œ
          periodSeconds: 60
```

```
behavior ë™ì‘:

scaleUp (í™•ì¥):
  stabilizationWindowSeconds: 0 â†’ ì¦‰ì‹œ ë°˜ì‘
  â†’ ë¶€í•˜ ì¦ê°€ì— ë¹ ë¥´ê²Œ ëŒ€ì‘

scaleDown (ì¶•ì†Œ):
  stabilizationWindowSeconds: 300 â†’ 5ë¶„ ëŒ€ê¸°
  â†’ ì¼ì‹œì  ë¶€í•˜ ê°ì†Œì— ê³¼ë„í•˜ê²Œ ë°˜ì‘í•˜ì§€ ì•ŠìŒ
  â†’ "í”Œë˜í•‘(flapping)" ë°©ì§€
```

### HPA í™•ì¸ ë° ë””ë²„ê¹…

```bash
# HPA ìƒíƒœ í™•ì¸
kubectl get hpa
# NAME         REFERENCE       TARGETS   MINPODS   MAXPODS   REPLICAS   AGE
# my-app-hpa   Deployment/my-app   45%/50%   2         10        3       5m

# HPA ìƒì„¸ í™•ì¸ (ì´ë²¤íŠ¸, ì¡°ê±´ ë“±)
kubectl describe hpa my-app-hpa

# TARGETSê°€ <unknown>/50% ì´ë©´:
#   - Metrics Server ë¯¸ì„¤ì¹˜
#   - Podì— resources.requests ë¯¸ì„¤ì •
#   - ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì „ (ì ì‹œ ëŒ€ê¸°)
```

### HPA ì£¼ì˜ì‚¬í•­

| ì£¼ì˜ì‚¬í•­ | ì„¤ëª… |
| --- | --- |
| requests í•„ìˆ˜ | Podì— resources.requestsê°€ ì—†ìœ¼ë©´ CPU ì‚¬ìš©ë¥  ê³„ì‚° ë¶ˆê°€ |
| Metrics Server í•„ìˆ˜ | HPAì˜ ë©”íŠ¸ë¦­ ì†ŒìŠ¤ |
| ì¿¨ë‹¤ìš´ ê¸°ê°„ | ê¸°ë³¸ ìŠ¤ì¼€ì¼ ë‹¤ìš´ ì•ˆì •í™”: 5ë¶„ (ê¸‰ê²©í•œ ì¶•ì†Œ ë°©ì§€) |
| HPA + ìˆ˜ë™ ìŠ¤ì¼€ì¼ë§ ì¶©ëŒ | HPA í™œì„± ì¤‘ `kubectl scale`ì€ HPAê°€ ë®ì–´ì”€ |
| Deploymentë§Œ ëŒ€ìƒ | ReplicaSet, StatefulSetë„ ê°€ëŠ¥í•˜ì§€ë§Œ ì£¼ë¡œ Deploymentì— ì‚¬ìš© |
| VPAì™€ ë™ì‹œ ì‚¬ìš© ì£¼ì˜ | HPA(ìˆ˜í‰)ì™€ VPA(ìˆ˜ì§)ê°€ ê°™ì€ ë©”íŠ¸ë¦­(CPU)ì„ ì‚¬ìš©í•˜ë©´ ì¶©ëŒ |

---

## ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì›¹UIì—ì„œ ê´€ë¦¬í•˜ê¸°(kube dashboard)

Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ **ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹œê°ì ìœ¼ë¡œ ê´€ë¦¬**í•  ìˆ˜ ìˆëŠ” ê³µì‹ ëŒ€ì‹œë³´ë“œ

```
Kubernetes Dashboard:

  ë¸Œë¼ìš°ì € â”€â”€(HTTPS)â”€â”€â†’ Dashboard Pod â”€â”€(API)â”€â”€â†’ API Server
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Dashboard UI       â”‚
                    â”‚  â”œâ”€ ì›Œí¬ë¡œë“œ ì¡°íšŒ    â”‚
                    â”‚  â”œâ”€ Pod ë¡œê·¸ í™•ì¸    â”‚
                    â”‚  â”œâ”€ ë¦¬ì†ŒìŠ¤ ìƒì„±/ìˆ˜ì •  â”‚
                    â”‚  â”œâ”€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „í™˜  â”‚
                    â”‚  â””â”€ ë¦¬ì†ŒìŠ¤ ì‚­ì œ      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ì¹˜

```bash
# ê³µì‹ Dashboard ì„¤ì¹˜ (ìµœì‹  ë²„ì „ í™•ì¸ í›„ ì ìš©)
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.7.0/aio/deploy/recommended.yaml

# Helmìœ¼ë¡œ ì„¤ì¹˜
helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/
helm install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard \
  --namespace kubernetes-dashboard --create-namespace

# ì„¤ì¹˜ í™•ì¸
kubectl get pods -n kubernetes-dashboard
kubectl get services -n kubernetes-dashboard
```

### Dashboard ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
| --- | --- |
| ì›Œí¬ë¡œë“œ ì¡°íšŒ | Deployment, Pod, ReplicaSet, Job ë“± ìƒíƒœ í™•ì¸ |
| ë¦¬ì†ŒìŠ¤ ìƒì„± | YAML ì—ë””í„° ë˜ëŠ” í¼ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ ìƒì„± |
| Pod ë¡œê·¸ | ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë° |
| Pod exec | ì›¹ í„°ë¯¸ë„ì—ì„œ ì»¨í…Œì´ë„ˆ ì ‘ì† |
| ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „í™˜ | ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ íƒ |
| ë¦¬ì†ŒìŠ¤ ìˆ˜ì •/ì‚­ì œ | YAML í¸ì§‘ ë° ì‚­ì œ |
| í´ëŸ¬ìŠ¤í„° ìƒíƒœ | ë…¸ë“œ, PV, StorageClass ë“± í™•ì¸ |

### ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

```
Dashboard ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸:

âœ… ì™¸ë¶€ ì¸í„°ë„·ì— ì§ì ‘ ë…¸ì¶œí•˜ì§€ ì•Šê¸°
  â†’ kubectl proxy, port-forward, VPN ê²½ìœ ë¡œ ì ‘ì†

âœ… ìµœì†Œ ê¶Œí•œ ì›ì¹™
  â†’ cluster-admin ëŒ€ì‹  í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬
  â†’ namespaceë³„ Role + RoleBinding ì‚¬ìš©

âœ… HTTPS ì‚¬ìš©
  â†’ DashboardëŠ” ê¸°ë³¸ì ìœ¼ë¡œ HTTPS

âœ… ë„¤íŠ¸ì›Œí¬ ì •ì±… ì ìš©
  â†’ Dashboard Podì— ëŒ€í•œ ì ‘ê·¼ì„ ì œí•œ

âŒ skip ë¡œê·¸ì¸ ë¹„í™œì„±í™”
  â†’ --enable-skip-login ì‚¬ìš© ê¸ˆì§€ (í”„ë¡œë•ì…˜)
```